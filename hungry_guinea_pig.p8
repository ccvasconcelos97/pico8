pico-8 cartridge // http://www.pico-8.com
version 42
__lua__

function _init()
 player = {
  sprite = 0,
  size = 2,
  x = 64,
  y = 64,
  flip_x = false,
  flip_y = false,
  eating = false,
  hp = 0,
  hp_width = 0,
 }
end

function _update60()
 if btn(0) then left() end -- left
 if btn(1) then right() end -- right
 if btn(2) then up() end -- up
 if btn(3) then down() end -- down
 check_player_position()
 check_player_hp()
end

function left()
 player.x -= 0.5
 player.flip_x = true
 player.flip_y = false
 player.sprite = 0
end

function right()
 player.x += 0.5
 player.flip_x = false
 player.flip_y = false
 player.sprite = 0
end

function up()
 player.y -= 0.5
 player.flip_y = false
 player.flip_x = false
 player.sprite = 2
end

function down()
 player.y += 0.5
 player.flip_y = true
 player.flip_x = false
 player.sprite = 2
end

function check_player_position()
 x_sprite_pos = flr((player.x+8)/8)
 y_sprite_pos = flr((player.y+8)/8)
 sprite_under = mget(x_sprite_pos, y_sprite_pos)

 if sprite_under == 4 then
  if player.eating == false then
   player.eating = true
   sfx(0)
   player.hp += 25
   mset(x_sprite_pos, y_sprite_pos, 5)
  end
 else
  player.eating = false
 end
end

function check_player_hp()
 player.hp_width = 128 * player.hp / 100
end

function _draw()
 cls()
 if player.hp < 100 then
  map()
  spr(player.sprite, player.x, player.y, player.size, player.size, player.flip_x, player.flip_y)

  if player.hp > 0 then
   rectfill(0, 0, player.hp_width, 4, 14)
  end
 else
  cls(14)
  print("you are no longer hungry", 15, 63, 2)
 end
end

__gfx__
00000000000000000000555555550000333ff3333333333333355333333555333333333333333333333333330000000000000000000000000000000000000000
0000000000000000000575997757500033ffff3333333333335bb5333356665337333333333333333333bb330000000000000000000000000000000000000000
000000000000000000555999777555003ff4fff33333333331bbbb133316661379733373333333333333b3330000000000000000000000000000000000000000
000000000000000000559959957755003fffff4f3333333331bbbb133316661337bb3797333666633bb3b33b0000000000000000000000000000000000000000
00000005500055000059995995777500fff4ffff333333331bbbbbb131666661333bbb733366666333b3b3bb0000000000000000000000000000000000000000
00055554455554500059999997777500f4fff4f3333333331bbbbbb131566661333b33333666665333b3b3b30000000000000000000000000000000000000000
005447549997755000599997777775003ff4fff333333333311441131555666133bb33333555553333b333330000000000000000000000000000000000000000
0544447599977750000597777777500033fff3333333333333344333155555513bb3333333333333333333330000000000000000000000000000000000000000
54444479975977950057777777444500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444779955977950054777777444500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
544447799997fff50054477777744500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
54444477997775750054447777744500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05455555455555500054447777744500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05f50005f505f5000005444444445000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00500000500050000005f555555f5000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000500000050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0505050505050505050705050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050504050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505040505050a05050505050605050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050506050505050805050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
05070505050905050a0505050905050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050605050505050605050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050805050505050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
050a05050505050505050905050a050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050505050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050504050505050505050504050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050605050505050505060505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050507050505050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050506050505050505050505050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0505050505050505050805050506050505050505050505050505050505050500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00050000000000205007050100501b050210501c050060500305003050060500d050150501b050160500605006050070500b0501305022050210500f05005050070500a050190502d0502e050280501605005050
